global
    maxconn 2048
    log stdout format raw local0
    stats socket /var/run/haproxy.sock mode 600 level admin expose-fd listeners

defaults
    mode http
    timeout connect 5s
    timeout client  30s
    timeout server  30s
    log global

# Placeholder frontend so haproxy can start even before the adapter writes config
frontend stackproxy_placeholder
    bind *:80
    mode http
    http-request deny deny_status 503

# Load the generated config (written by the adapter). If the file is empty,
# haproxy simply ignores it.
include /etc/haproxy/generated.cfg
